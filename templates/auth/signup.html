{% extends 'base.html' %}
{% load static %}
{% block start %}
<section class="vh-50">
  <div class="container-fluid h-custom">
    <div class="row d-flex justify-content-center align-items-center h-100">
      <div class="col-md-9 col-lg-6 col-xl-5">
        <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/draw2.webp"
          class="img-fluid" alt="Sample image">
      </div>
      <div class="col-md-8 col-lg-6 col-xl-4 offset-xl-1">
        <form method="POST" action="{% url 'register' %}">
          {% csrf_token %}
          <div class="form-outline mb-4">
            <input type="text" id="username" name="username" onblur="checkUsernameLength()" class="form-control form-control-lg"
              placeholder="Enter a username" required />
            <span id="username-error" class="text-danger"></span> 
          </div>
          <div class="form-outline mb-4">
            <input type="email"  name="email" class="form-control form-control-lg"
              placeholder="Enter a valid email address" required />
          </div>
          <div class="form-outline mb-3">
            <input type="password" id="password" name="password" onblur="checkPassLength()" class="form-control form-control-lg"
              placeholder="Enter password" required />
            <span id="password-error" class="text-danger"></span>
          </div>
          <div class="invalid-feedback d-block text-danger"> {{error_msg}} </div>
          <div class="text-center text-lg-start mt-4 pt-2">
            <button type="submit" class="btn btn-primary btn-lg"
              style="padding-left: 2.5rem; padding-right: 2.5rem;">Register</button>
            <p class="small fw-bold mt-2 pt-1 mb-0">have a account? <a href="{% url 'loginpage' %}"
                class="link-danger">Login</a></p>
          </div>

        </form>
      </div>
    </div>
  </div>
</section>
<script>
  function checkUsernameLength() {
    var username = document.getElementById("username").value;
    var errorLabel = document.getElementById("username-error");
    
    if (username.length > 20) {
      errorLabel.textContent = "Username must be 20 characters or less.";
    } else {
      errorLabel.textContent = "";
    }
  }

  function checkPassLength() {
    var password = document.getElementById("password").value;
    var errorLabel = document.getElementById("password-error");
    
    if (password.length >= 8 && password.length <= 20) {
      errorLabel.textContent = "";
    } else {
      errorLabel.textContent = "password must be 8 to 20 long..";
    }
  }
  </script>
{% endblock start %}

